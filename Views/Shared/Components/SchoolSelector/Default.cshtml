@model List<School>
@{
    int currentSchoolId = (int)ViewBag.CurrentSchoolId;
    string currentAction = ViewContext.RouteData.Values["action"]?.ToString() ?? "Index";
    string currentController = ViewContext.RouteData.Values["controller"]?.ToString() ?? "Home";
}

<form method="get" asp-controller="@currentController" asp-action="@currentAction" id="schoolForm">
    <select name="schoolId" onchange="this.form.submit()" class="form-select">
        @foreach (var school in Model)
        {
            <option value="@school.Id" selected="@(school.Id == currentSchoolId)">
                @school.Name
            </option>
        }
    </select>
</form>
